import{r as d,a as q,b as Y}from"./vendor-Gm9i_4Ku.js";import{R as Q,a as j,B as K}from"./router-Bs10hMPl.js";import{u as J,Q as X,a as G}from"./query-BDc3fld9.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const g of a.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();var T={exports:{}},k={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z=d,ee=Symbol.for("react.element"),te=Symbol.for("react.fragment"),ie=Object.prototype.hasOwnProperty,ne=Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,re={key:!0,ref:!0,__self:!0,__source:!0};function _(t,n,i){var s,r={},a=null,g=null;i!==void 0&&(a=""+i),n.key!==void 0&&(a=""+n.key),n.ref!==void 0&&(g=n.ref);for(s in n)ie.call(n,s)&&!re.hasOwnProperty(s)&&(r[s]=n[s]);if(t&&t.defaultProps)for(s in n=t.defaultProps,n)r[s]===void 0&&(r[s]=n[s]);return{$$typeof:ee,type:t,key:a,ref:g,props:r,_owner:ne.current}}k.Fragment=te;k.jsx=_;k.jsxs=_;T.exports=k;var e=T.exports,C={},A=q;C.createRoot=A.createRoot,C.hydrateRoot=A.hydrateRoot;const oe="/api/v1";class S extends Error{constructor(n,i){super(n),this.status=i,this.name="ApiError"}}async function se(t,n){try{const i=await fetch(`${oe}${t}`,{headers:{"Content-Type":"application/json",...n==null?void 0:n.headers},credentials:"include",...n});if(!i.ok)throw new S(`HTTP error! status: ${i.status}`,i.status);const s=await i.json();if(s.error)throw new S(s.error);return s}catch(i){throw i instanceof S?i:new S(`Network error: ${i instanceof Error?i.message:"Unknown error"}`)}}const le={getDisplayData:()=>se("/display")},I=()=>J({queryKey:["displayData"],queryFn:le.getDisplayData,refetchInterval:(t,n)=>n.state.error?6e4:3e4,retry:(t,n)=>{var i,s,r,a;return(s=(i=n==null?void 0:n.message)==null?void 0:i.includes)!=null&&s.call(i,"NetworkError")||(a=(r=n==null?void 0:n.message)==null?void 0:r.includes)!=null&&a.call(r,"Failed to fetch")?!1:t<2},retryDelay:t=>Math.min(1e3*2**t,3e4),notifyOnChangeProps:["data","error"]}),z=()=>{const[t,n]=d.useState(navigator.onLine),[i,s]=d.useState(null),[r,a]=d.useState(null);return d.useEffect(()=>{const g=()=>{n(!0),s(new Date),a(null)},p=()=>{n(!1),a(new Date)};return window.addEventListener("online",g),window.addEventListener("offline",p),navigator.onLine?s(new Date):a(new Date),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",p)}},[]),{isOnline:t,lastConnected:i,connectionLostAt:r}},$=({weather:t})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5vw",background:"linear-gradient(135deg, #009FFF, #0B5895)",padding:"1.5vh 2vw",borderRadius:"15px",boxShadow:"0 6px 12px rgba(0,159,255,0.2)",color:"white",height:"12vh",width:"45vw",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5vw",minWidth:"14vw"},children:[e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.15)",borderRadius:"50%",padding:"1vh",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255,255,255,0.2)"},children:e.jsx("img",{src:`http://openweathermap.org/img/wn/${t.icon}@2x.png`,alt:"Weather",style:{width:"7vh",height:"7vh",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}})}),e.jsxs("div",{style:{fontSize:"6vh",fontWeight:"bold",lineHeight:1,textShadow:"0 2px 4px rgba(0,0,0,0.3)",minWidth:"8vw",textAlign:"center"},children:[t.temperature,"°"]})]}),e.jsxs("div",{style:{borderLeft:"2px solid rgba(255, 255, 255, 0.25)",paddingLeft:"1.5vw",marginLeft:"0.8vw",fontSize:"2.2vh",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.2vh 2vw",alignItems:"center",minWidth:"16vw"},children:[e.jsxs("div",{style:{whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.5vw"},children:[e.jsx("span",{style:{fontSize:"2vh",opacity:.9,minWidth:"1.8vw",textAlign:"center"},children:"🌡️"}),e.jsxs("span",{style:{fontSize:"2.1vh",fontWeight:"500"},children:["Máx: ",t.temp_max,"°C"]})]}),e.jsxs("div",{style:{whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.5vw"},children:[e.jsx("span",{style:{fontSize:"2vh",opacity:.9,minWidth:"1.8vw",textAlign:"center"},children:"🌧️"}),e.jsxs("span",{style:{fontSize:"2.1vh",fontWeight:"500"},children:["Chuva: ",t.rain_chance,"%"]})]}),e.jsxs("div",{style:{whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.5vw"},children:[e.jsx("span",{style:{fontSize:"2vh",opacity:.9,minWidth:"1.8vw",textAlign:"center"},children:"❄️"}),e.jsxs("span",{style:{fontSize:"2.1vh",fontWeight:"500"},children:["Mín: ",t.temp_min,"°C"]})]}),e.jsxs("div",{style:{whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.5vw"},children:[e.jsx("span",{style:{fontSize:"2vh",opacity:.9,minWidth:"1.8vw",textAlign:"center"},children:"💧"}),e.jsxs("span",{style:{fontSize:"2.1vh",fontWeight:"500"},children:["Umidade: ",t.humidity,"%"]})]})]}),e.jsxs("div",{style:{borderLeft:"2px solid rgba(255, 255, 255, 0.25)",paddingLeft:"2vw",marginLeft:"1vw",minWidth:"8vw",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.6vh",opacity:.9,textTransform:"capitalize",lineHeight:1.2,fontWeight:"400"},children:t.weather}),e.jsx("div",{style:{fontSize:"1.4vh",opacity:.7,marginTop:"0.3vh"},children:t.city})]})]}),E=({birthdays:t})=>{const n=i=>{const s=new Date(i);return`${s.getDate().toString().padStart(2,"0")}/${(s.getMonth()+1).toString().padStart(2,"0")}`};return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"2.8vh",color:"#0B5895",marginBottom:"1.5vh",paddingBottom:"0.8vh",borderBottom:"3px solid #009FFF",display:"flex",alignItems:"center",gap:"0.5rem"},children:"🎂 Próximos Aniversários"}),e.jsx("div",{style:{flex:1,overflowY:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"1vh"},children:t.length===0?e.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"2vh",padding:"2vh"},children:"Nenhum aniversário próximo"}):t.slice(0,5).map(i=>e.jsxs("div",{style:{background:i.is_today?"linear-gradient(to right, rgba(255, 215, 0, 0.1), #f0f3f5 80%)":"#f0f3f5",padding:"1.2vh",borderRadius:"10px",borderLeft:`4px solid ${i.is_today?"#FFD700":"#009FFF"}`,position:"relative",height:"calc((100% - 4vh) / 5)",display:"flex",flexDirection:"column",justifyContent:"center",animation:i.is_today?"pulse 2s ease-in-out infinite":"none"},children:[e.jsx("div",{style:{fontSize:"2.2vh",fontWeight:"bold",color:i.is_today?"#FFD700":"#0B5895",marginBottom:"0.3vh"},children:i.name}),e.jsx("div",{style:{fontSize:"1.8vh",color:"#3A3A3A"},children:i.is_today?"Hoje! 🎂":n(i.date)}),e.jsx("div",{style:{fontSize:"1.6vh",color:"#3A3A3A",fontStyle:"italic"},children:i.sector}),i.is_today&&e.jsx("div",{style:{position:"absolute",right:"1.5vh",top:"50%",transform:"translateY(-50%)",fontSize:"2.5vh",animation:"celebrate 1s ease infinite"},children:"🎉"})]},`${i.name}-${i.date}`))}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes celebrate {
            0% { transform: translateY(-50%) rotate(0deg); }
            25% { transform: translateY(-50%) rotate(15deg); }
            75% { transform: translateY(-50%) rotate(-15deg); }
            100% { transform: translateY(-50%) rotate(0deg); }
          }

          @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
          }
        `}})]})},W=({media:t,debug:n=!1})=>{const[i,s]=d.useState(0),[r,a]=d.useState(!1),[g,p]=d.useState("loading"),[y,O]=d.useState(!1),v=d.useRef(null),u=d.useRef(new Map),b=d.useRef(null),c=d.useCallback((l,o="info")=>{const h=new Date().toISOString().substr(11,8);o==="error"?console.error(`[MediaRotator ${h}] ${l}`):o==="warn"?console.warn(`[MediaRotator ${h}] ${l}`):n&&console.log(`[MediaRotator ${h}] ${l}`)},[n]),f=d.useCallback(()=>{v.current&&(clearTimeout(v.current),v.current=null)},[]),w=d.useCallback(()=>{b.current&&(clearTimeout(b.current),b.current=null)},[]),x=d.useCallback(()=>{if(t.length<=1||r)return;const l=(i+1)%t.length;c(`Moving from slide ${i} to ${l}`),a(!0),f(),w();const o=u.current.get(i);o&&!o.paused&&(o.pause(),o.currentTime=0),s(l),p("loading"),b.current=setTimeout(()=>{a(!1)},300)},[i,t.length,r,f,w,c]),P=d.useCallback(l=>o=>{o?u.current.set(l,o):u.current.delete(l)},[]),M=d.useCallback(l=>{if(l!==i)return;c(`Video can play for slide ${l}`);const o=u.current.get(l);o&&o.paused&&o.play().catch(h=>{c(`Video play failed for slide ${l}: ${h.message}`,"error"),p("error"),setTimeout(()=>x(),2e3)})},[i,c,x]),N=d.useCallback(l=>{if(l!==i)return;c(`Video started playing for slide ${l}`),p("playing"),f();const o=u.current.get(l);if(o&&o.duration&&isFinite(o.duration)){const h=Math.ceil(o.duration*1e3)+500;v.current=setTimeout(()=>{c(`Video duration timer expired for slide ${l}`),x()},h)}},[i,c,f,x]),V=d.useCallback(l=>{l===i&&(c(`Video ended for slide ${l}`),p("ended"),f(),setTimeout(()=>{r||x()},100))},[i,c,f,x,r]),H=d.useCallback((l,o)=>{l===i&&(c(`Video error for slide ${l}: ${(o==null?void 0:o.message)||"Unknown error"}`,"error"),p("error"),f(),setTimeout(()=>x(),2e3))},[i,c,f,x]);return d.useEffect(()=>{if(t.length===0||!y)return;const l=t[i];if(l){if(f(),l.is_video)c(`Setting up video for slide ${i}`),p("loading"),setTimeout(()=>{const o=u.current.get(i);o?(c(`Forcing video load for slide ${i}`),o.currentTime=0,o.load(),o.readyState>=3&&(c(`Video ${i} already ready, playing immediately`),o.play().catch(h=>{c(`Video immediate play failed for slide ${i}: ${h.message}`,"error"),p("error"),setTimeout(()=>x(),2e3)}))):(c(`No video element found for slide ${i}`,"error"),setTimeout(()=>x(),1e3))},100);else{const o=Math.max(l.duration,3e3);c(`Setting image timer for ${o}ms on slide ${i}`),v.current=setTimeout(()=>{x()},o)}return()=>{f()}}},[i,t,y,f,x,c]),d.useEffect(()=>{t.length>0&&!y&&(c(`Initializing slideshow with ${t.length} slides`),s(0),p("loading"),setTimeout(()=>{O(!0)},100))},[t,y,c]),d.useEffect(()=>()=>{f(),w(),u.current.clear()},[f,w]),t.length===0?e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"white",borderRadius:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",fontSize:"2rem",color:"#666"},children:"Nenhuma mídia disponível"}):y?e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000",borderRadius:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[t.map((l,o)=>{const h=o===i,m=l.width===1920&&l.height===1080;return e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:h?1:0,transition:"opacity 0.8s ease-in-out",display:"flex",justifyContent:"center",alignItems:"center",zIndex:h?10:1,background:"#000"},children:l.is_video?e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:P(o),src:l.local_path,preload:"auto",muted:!0,playsInline:!0,onCanPlay:()=>M(o),onPlay:()=>N(o),onEnded:()=>V(o),onError:U=>H(o,U.currentTarget.error),style:{width:m?"100%":"auto",height:m?"100%":"auto",maxWidth:"100%",maxHeight:"100%",objectFit:m?"cover":"contain",borderRadius:"20px"}}),h&&g==="loading"&&e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",fontSize:"1.2rem",background:"rgba(0,0,0,0.7)",padding:"10px 20px",borderRadius:"10px",zIndex:15},children:"Carregando vídeo..."}),h&&g==="error"&&e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#ff6b6b",fontSize:"1.2rem",background:"rgba(0,0,0,0.7)",padding:"10px 20px",borderRadius:"10px",zIndex:15},children:"Erro ao carregar vídeo"})]}):e.jsx("img",{src:l.local_path,alt:"Display Content",loading:"lazy",style:{width:m?"100%":"auto",height:m?"100%":"auto",maxWidth:"100%",maxHeight:"100%",objectFit:m?"cover":"contain",borderRadius:"20px"}})},`${l.id}-${o}`)}),t.length>1&&e.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"8px",zIndex:20,background:"rgba(0,0,0,0.3)",padding:"8px 12px",borderRadius:"20px"},children:t.map((l,o)=>e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:o===i?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.4)",transition:"all 0.3s ease",border:"1px solid rgba(255, 255, 255, 0.2)"}},o))})]}):e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"#000",borderRadius:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",color:"white",fontSize:"1.5rem"},children:"Inicializando..."})},B=()=>{const[t,n]=d.useState(new Date);return d.useEffect(()=>{const i=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(i)},[]),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5vw",background:"#f0f3f5",padding:"1.5vh 2vw",borderRadius:"15px",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.05)",height:"12vh",minWidth:"24vw",maxWidth:"32vw"},children:[e.jsx("div",{style:{fontSize:"8vh",fontWeight:"900",color:"#0B5895",lineHeight:1,letterSpacing:"-2px",minWidth:"12vw",textAlign:"center",fontFamily:"monospace"},children:t.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",hour12:!1})}),e.jsxs("div",{style:{borderLeft:"2px solid #C4CCD1",paddingLeft:"1.5vw",height:"8vh",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx("div",{style:{fontSize:"2.8vh",color:"#3A3A3A",lineHeight:1.1,fontWeight:"500",textTransform:"capitalize"},children:t.toLocaleDateString("pt-BR",{weekday:"long"})}),e.jsx("div",{style:{fontSize:"2.4vh",color:"#666",lineHeight:1.1,marginTop:"0.3vh"},children:t.toLocaleDateString("pt-BR",{day:"numeric",month:"long"})})]})]})},D=()=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f8f9fa",flexDirection:"column"},children:[e.jsx("div",{style:{width:"60px",height:"60px",border:"4px solid #e3e3e3",borderTop:"4px solid #009FFF",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),e.jsx("p",{style:{color:"#666",fontSize:"1.2rem",margin:0},children:"Loading display..."}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}})]}),F=({message:t,details:n})=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",margin:0,background:"#000",color:"#fff",fontFamily:"sans-serif"},children:e.jsxs("div",{style:{textAlign:"center",padding:"2rem",maxWidth:"600px"},children:[e.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem",color:"#ff6b6b"},children:"Erro de Conexão"}),e.jsx("p",{style:{fontSize:"1.2rem",marginBottom:"1rem",color:"#ccc"},children:t||"Não foi possível conectar ao servidor."}),n&&e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"1rem",borderRadius:"8px",marginTop:"1rem",fontSize:"0.9rem",color:"#ffeb3b",textAlign:"left"},children:[e.jsx("strong",{children:"Detalhes:"}),e.jsx("br",{}),n]}),e.jsxs("div",{style:{marginTop:"2rem",fontSize:"0.9rem",color:"#999"},children:[e.jsx("p",{children:"Verifique se:"}),e.jsxs("ul",{style:{textAlign:"left",display:"inline-block"},children:[e.jsx("li",{children:"O servidor Flask está rodando (porta 5000)"}),e.jsx("li",{children:"A configuração do Firebase está correta"}),e.jsx("li",{children:"O dispositivo está registrado no sistema"})]})]})]})}),R=()=>{const{isOnline:t,connectionLostAt:n}=z();if(t)return null;const i=s=>s.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{style:{position:"fixed",bottom:"20px",left:"20px",background:"linear-gradient(135deg, #ff6b6b, #ee5a52)",color:"white",padding:"12px 20px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(255, 107, 107, 0.4)",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:"500",zIndex:1e3,border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"⚠️"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:"Conexão Perdida"}),e.jsx("div",{style:{fontSize:"12px",opacity:.9,marginTop:"2px"},children:n&&`Desde ${i(n)}`})]}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.8)",animation:"pulse 2s infinite"}}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
          }
        `}})]})},ae=()=>{const{data:t,isLoading:n,error:i}=I(),{isOnline:s}=z();if(n)return e.jsx(D,{});if(i||!(t!=null&&t.configured)){if(!s&&!t)return e.jsxs("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"#000",color:"#fff",fontFamily:"system-ui",flexDirection:"column",gap:"20px"},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"📡"}),e.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"Sem conexão com internet"}),e.jsx("div",{style:{fontSize:"1rem",opacity:.7,textAlign:"center"},children:"Aguardando reconexão para carregar o conteúdo..."}),e.jsx(R,{})]});if(s&&(i||!(t!=null&&t.configured))){const r=(t==null?void 0:t.error)||(i==null?void 0:i.message)||"Device not configured",a=i?`API Error: ${i==null?void 0:i.message}`:t==null?void 0:t.error;return e.jsx(F,{message:r,details:a})}}return e.jsxs("div",{style:{height:"100vh",background:"#f8f9fa",padding:"2vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{height:"16vh",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.5vh 2vw",background:"white",borderRadius:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",marginBottom:"2vh",gap:"1.5vw"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",minWidth:"15vw",flex:"0 0 auto"},children:e.jsx("img",{src:"/static/display/logo.png",alt:"Company Logo",style:{height:"10vh",objectFit:"contain"}})}),e.jsx("div",{style:{flex:"1 1 auto",display:"flex",justifyContent:"center",maxWidth:"40vw"},children:e.jsx(B,{})}),e.jsx("div",{style:{flex:"0 0 auto",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:(t==null?void 0:t.weather)&&e.jsx($,{weather:t.weather})})]}),e.jsxs("div",{style:{flex:1,display:"flex",gap:"2vh",height:"calc(82vh - 4vh)"},children:[e.jsx("div",{style:{flex:1,position:"relative",overflow:"hidden",height:"100%"},children:e.jsx(W,{media:(t==null?void 0:t.media)||[],debug:!0})}),e.jsxs("div",{style:{width:"25vw",background:"white",borderRadius:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",padding:"2vh",display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(E,{birthdays:(t==null?void 0:t.birthdays)||[]}),e.jsxs("div",{style:{position:"fixed",bottom:0,right:0,fontSize:"14px",color:"rgba(0, 0, 0, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",padding:"6px 10px",borderRadius:"4px 0 0 0",backdropFilter:"blur(5px)",fontFamily:"monospace",letterSpacing:"0.5px",boxShadow:"-2px -2px 4px rgba(0, 0, 0, 0.1)"},children:["v",(t==null?void 0:t.version)||"unknown"]})]})]}),e.jsx(R,{})]})},de=()=>{const{data:t,isLoading:n,error:i}=I(),{isOnline:s}=z();if(n)return e.jsx(D,{});if(i||!(t!=null&&t.configured)){if(!s&&!t)return e.jsxs("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"#000",color:"#fff",fontFamily:"system-ui",flexDirection:"column",gap:"20px"},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"📡"}),e.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"Sem conexão com internet"}),e.jsx("div",{style:{fontSize:"1rem",opacity:.7,textAlign:"center"},children:"Aguardando reconexão para carregar o conteúdo..."}),e.jsx(R,{})]});if(s&&(i||!(t!=null&&t.configured))){const r=(t==null?void 0:t.error)||(i==null?void 0:i.message)||"Device not configured",a=i?`API Error: ${i==null?void 0:i.message}`:t==null?void 0:t.error;return e.jsx(F,{message:r,details:a})}}return e.jsxs("div",{style:{height:"100vh",background:"#f8f9fa",padding:"2vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{height:"14vh",display:"flex",flexDirection:"column",background:"white",borderRadius:"16px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",marginBottom:"2vh",padding:"1vh 2vh",gap:"1vh"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"6vh"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("img",{src:"/static/display/logo.png",alt:"Company Logo",style:{height:"5vh",objectFit:"contain"}})}),e.jsx("div",{style:{flex:"1",display:"flex",justifyContent:"center"},children:e.jsx(B,{})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"6vh"},children:(t==null?void 0:t.weather)&&e.jsx($,{weather:t.weather})})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"2vh",height:"calc(84vh - 4vh)"},children:[e.jsx("div",{style:{flex:"0 0 60%",position:"relative",overflow:"hidden",minHeight:"40vh"},children:e.jsx(W,{media:(t==null?void 0:t.media)||[],debug:!0})}),e.jsxs("div",{style:{flex:"0 0 40%",background:"white",borderRadius:"16px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",padding:"2vh",display:"flex",flexDirection:"column",minHeight:"25vh",position:"relative"},children:[e.jsx(E,{birthdays:(t==null?void 0:t.birthdays)||[]}),e.jsxs("div",{style:{position:"absolute",bottom:"1vh",right:"2vh",fontSize:"12px",color:"rgba(0, 0, 0, 0.3)",fontFamily:"monospace",letterSpacing:"0.5px"},children:["v",(t==null?void 0:t.version)||"unknown"]})]})]}),e.jsx(R,{})]})},ce=()=>{var r;const{data:t,isLoading:n,error:i}=I();if(n)return e.jsx(D,{});if(i&&!t)return e.jsx(F,{message:"Failed to load device configuration",details:(i==null?void 0:i.message)||"Unknown error"});const s=((r=t==null?void 0:t.device)==null?void 0:r.type)||"display_tv";switch(console.log(`[LayoutRouter] Rendering layout for device type: ${s}`),t!=null&&t.device&&console.log("[LayoutRouter] Device info:",t.device),s){case"vertical_tv":return e.jsx(de,{});case"display_tv":default:return e.jsx(ae,{})}},L=()=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f8f9fa"},children:e.jsxs("div",{style:{textAlign:"center",padding:"2rem",background:"white",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[e.jsx("h1",{style:{color:"#0B5895",marginBottom:"1rem"},children:"Admin Dashboard"}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Admin interface coming soon..."}),e.jsx("a",{href:"/admin",style:{color:"#009FFF",textDecoration:"none",fontSize:"1.1rem"},children:"Use Legacy Admin Interface"})]})}),he=()=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f8f9fa"},children:e.jsxs("div",{style:{textAlign:"center",padding:"2rem",background:"white",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[e.jsx("h1",{style:{color:"#0B5895",marginBottom:"1rem"},children:"Login"}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"React login interface coming soon..."}),e.jsx("a",{href:"/login",style:{color:"#009FFF",textDecoration:"none",fontSize:"1.1rem"},children:"Use Legacy Login"})]})}),fe=()=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f8f9fa"},children:e.jsxs("div",{style:{textAlign:"center",padding:"2rem",background:"white",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[e.jsx("h1",{style:{color:"#dc3545",marginBottom:"1rem"},children:"404 - Page Not Found"}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"The page you're looking for doesn't exist."}),e.jsx("a",{href:"/",style:{color:"#009FFF",textDecoration:"none",fontSize:"1.1rem"},children:"Return to Display"})]})});function ge(){return e.jsx("div",{className:"App",children:e.jsxs(Q,{children:[e.jsx(j,{path:"/",element:e.jsx(ce,{})}),e.jsx(j,{path:"/admin",element:e.jsx(L,{})}),e.jsx(j,{path:"/admin/*",element:e.jsx(L,{})}),e.jsx(j,{path:"/login",element:e.jsx(he,{})}),e.jsx(j,{path:"*",element:e.jsx(fe,{})})]})})}const xe=new X({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:(t,n)=>{var i,s,r,a;return(s=(i=n==null?void 0:n.message)==null?void 0:i.includes)!=null&&s.call(i,"NetworkError")||(a=(r=n==null?void 0:n.message)==null?void 0:r.includes)!=null&&a.call(r,"Failed to fetch")?!1:t<2},staleTime:5*60*1e3,cacheTime:30*60*1e3,refetchOnReconnect:!0,retryOnMount:!1}}}),pe=C.createRoot(document.getElementById("root"));pe.render(e.jsx(Y.StrictMode,{children:e.jsx(G,{client:xe,children:e.jsx(K,{children:e.jsx(ge,{})})})}));
